# 项目简介 (Project Brief)

## 项目概述
基于Qwen3嵌入模型和Milvus向量数据库的现代化RAG（检索增强生成）系统。该系统提供了完整的文档处理、向量检索、重排序和答案生成管道，支持本地和远程部署，具有高性能、可扩展和易用的特点。

## 核心目标
1. **构建现代化RAG系统**: 基于最新技术栈的检索增强生成系统
2. **提供开箱即用体验**: 预配置的管道和简化的使用流程
3. **支持生产环境部署**: 完善的错误处理、监控和扩展性
4. **建立标准化框架**: 为RAG应用开发提供参考实现
5. **优化用户体验**: 统一的入口点、自动配置加载和清晰的错误提示
6. **支持远程服务**: 支持远程Milvus和LLM服务部署

## 技术栈
- **嵌入模型**: Qwen3-Embedding (阿里云通义千问3)
- **向量数据库**: Milvus 2.4.x
- **大语言模型**: OpenAI API / 本地模型
- **开发框架**: Python 3.8+, Poetry, Click + Rich
- **配置管理**: Pydantic, YAML/JSON, 环境变量
- **测试框架**: pytest, Mock服务
- **代码质量**: flake8, black, isort, mypy, pre-commit

## 主要功能
1. **文档处理**: 智能分块、格式检测、元数据管理
2. **向量化**: 高质量语义嵌入、批量处理、缓存优化
3. **检索**: 高效向量搜索、多索引支持、相似性计算
4. **重排序**: 多种算法支持、混合重排序、质量提升
5. **生成**: 上下文感知、流式输出、质量评分
6. **CLI界面**: 现代化命令行工具、用户友好交互
7. **配置管理**: 自动加载、验证、热重载、远程连接支持
8. **监控**: 性能统计、错误追踪、健康检查

## 系统架构
```
用户输入 → CLI界面 → 主入口点 → 配置管理 → 服务组件 → 结果输出
                ↓
        文档处理 → 嵌入服务 → Milvus服务 → 重排序 → LLM服务
```

## 最新状态
- **完成度**: 95%
- **核心功能**: 全部完成并稳定运行
- **测试覆盖**: 85%
- **代码质量**: 100%符合规范
- **入口点稳定性**: 100% (已修复)
- **配置管理**: 完全优化，支持自动加载和远程连接
- **远程支持**: 完全支持远程Milvus和LLM服务

## 关键改进
1. **入口点优化**: 修复了main.py的重复入口点问题，确保单一入口点
2. **错误处理增强**: 添加了用户友好的错误信息和导入验证
3. **模块导入稳定**: 统一了CLI接口，避免循环导入风险
4. **远程Milvus支持**: 完全支持远程Milvus服务器连接
5. **配置管理优化**: 使用endpoint统一管理连接配置
6. **自动配置加载**: 默认加载rag_config.json简化使用
7. **配置文件命名**: 标准化配置文件命名规范
8. **向后兼容**: 保持对旧配置格式的兼容性

## 使用方式
```bash
# 基本使用（自动加载默认配置）
python main.py

# 指定配置文件
python main.py --config rag_config.json

# 查看帮助
python main.py --help

# 检查系统状态
python main.py status
```

## 配置文件
- **主配置**: rag_config.json (默认自动加载)
- **远程配置**: rag_config.remote_milvus.json (远程Milvus模板)
- **环境配置**: 支持环境变量覆盖

## 部署选项
1. **本地部署**: Docker Compose + 本地服务
2. **远程部署**: 支持远程Milvus和LLM服务
3. **云部署**: Kubernetes + 云服务
4. **混合部署**: 本地+远程服务组合

## 扩展性
- **嵌入模型**: 支持自定义嵌入模型
- **重排序算法**: 支持自定义重排序算法
- **LLM提供商**: 支持多种LLM服务
- **存储后端**: 支持其他向量数据库
- **CLI命令**: 支持自定义CLI命令

## 质量保证
- **测试覆盖**: 85%代码覆盖率
- **类型检查**: 100%通过mypy检查
- **代码风格**: 100%符合flake8规范
- **预提交检查**: 自动化代码质量检查
- **持续集成**: 自动化测试和部署

## 项目价值
1. **技术价值**: 现代化的RAG实现参考
2. **实用价值**: 开箱即用的RAG解决方案
3. **学习价值**: 完整的RAG系统学习资源
4. **社区价值**: 开源贡献和知识分享
5. **商业价值**: 企业级RAG应用基础

## 未来规划
1. **API接口**: 开发RESTful API
2. **Web界面**: 创建Web管理界面
3. **监控系统**: 集成Prometheus监控
4. **容器化**: 完善Docker部署
5. **企业功能**: 多租户、权限管理
6. **生态系统**: 插件系统和第三方集成

## 项目简要说明

- 核心要求：支持多环境配置、环境变量优先级、CLI/主流程灵活切换，提升运维与开发体验。 